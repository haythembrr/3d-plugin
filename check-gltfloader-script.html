<!DOCTYPE html>
<html>
<head>
    <title>Check GLTFLoader Script Loading</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; }
        pre { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>GLTFLoader Script Loading Check</h1>
        
        <h2>Run this in your browser console on the configurator page:</h2>
        
        <pre>
// Check if GLTFLoader script tag exists
const scripts = Array.from(document.querySelectorAll('script[src]'));
const gltfScript = scripts.find(s => s.src.includes('GLTFLoader'));

console.log('=== GLTFLoader Script Check ===');
console.log('1. Script tag found:', !!gltfScript);

if (gltfScript) {
    console.log('2. Script src:', gltfScript.src);
    console.log('3. Script in DOM:', document.contains(gltfScript));
    
    // Try to fetch the script to see if it's accessible
    fetch(gltfScript.src)
        .then(response => {
            console.log('4. Script HTTP status:', response.status);
            console.log('5. Script accessible:', response.ok);
            return response.text();
        })
        .then(text => {
            console.log('6. Script size:', text.length, 'bytes');
            console.log('7. Script starts with:', text.substring(0, 100));
            console.log('8. Contains THREE.GLTFLoader:', text.includes('THREE.GLTFLoader'));
        })
        .catch(error => {
            console.error('4. Error fetching script:', error);
        });
} else {
    console.log('2. GLTFLoader script NOT found in page');
    console.log('3. All script sources:');
    scripts.forEach(s => {
        const filename = s.src.split('/').pop();
        console.log('   -', filename);
    });
}

// Check if THREE.GLTFLoader exists
console.log('9. THREE.GLTFLoader exists:', typeof THREE !== 'undefined' && typeof THREE.GLTFLoader !== 'undefined');

// Check window.GLTFLoader
console.log('10. window.GLTFLoader exists:', typeof window.GLTFLoader !== 'undefined');
        </pre>
        
        <h2>Alternative: Check Network Tab</h2>
        <ol>
            <li>Open DevTools (F12)</li>
            <li>Go to Network tab</li>
            <li>Filter by "GLTFLoader"</li>
            <li>Refresh the page</li>
            <li>Check if GLTFLoader.js loads successfully (status 200)</li>
            <li>If 404 or other error, the file path is wrong</li>
        </ol>
        
        <h2>Manual Fix: Load GLTFLoader Directly</h2>
        <p>If the script isn't loading, try this in console:</p>
        <pre>
// Manually load GLTFLoader
const script = document.createElement('script');
script.src = '/wordpress/wp-content/plugins/blasti-configurator/assets/js/GLTFLoader.js';
script.onload = function() {
    console.log('✓ GLTFLoader script loaded');
    console.log('✓ THREE.GLTFLoader available:', typeof THREE.GLTFLoader !== 'undefined');
    
    // Reinitialize configurator model loader
    if (typeof BlastiConfigurator !== 'undefined') {
        BlastiConfigurator.initializeModelLoader();
        console.log('✓ Model loader reinitialized');
    }
};
script.onerror = function() {
    console.error('✗ Failed to load GLTFLoader script');
};
document.head.appendChild(script);
        </pre>
    </div>
</body>
</html>
