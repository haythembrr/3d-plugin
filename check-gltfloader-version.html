<!DOCTYPE html>
<html>
<head>
    <title>Check GLTFLoader Version</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .result {
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            font-size: 18px;
        }
        .success {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            border: 2px solid #17a2b8;
            color: #0c5460;
        }
        button {
            padding: 15px 30px;
            font-size: 16px;
            background: #007cba;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #005a87;
        }
        pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üîç GLTFLoader Version Checker</h1>
    <p>This page checks if you're loading the NEW or OLD version of GLTFLoader</p>
    
    <button onclick="checkVersion()">Check GLTFLoader Version</button>
    
    <div id="result"></div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="assets/js/GLTFLoader.js"></script>
    
    <script>
        function checkVersion() {
            const resultDiv = document.getElementById('result');
            let html = '';
            
            // Check if THREE is loaded
            if (typeof THREE === 'undefined') {
                html = '<div class="result error">‚ùå THREE.js is not loaded!</div>';
                resultDiv.innerHTML = html;
                return;
            }
            
            html += '<div class="result success">‚úÖ THREE.js is loaded</div>';
            
            // Check if GLTFLoader is loaded
            if (typeof THREE.GLTFLoader === 'undefined') {
                html += '<div class="result error">‚ùå GLTFLoader is not loaded!</div>';
                resultDiv.innerHTML = html;
                return;
            }
            
            html += '<div class="result success">‚úÖ GLTFLoader is loaded</div>';
            
            // Check GLTFLoader version by testing methods
            try {
                const loader = new THREE.GLTFLoader();
                
                // Check if it has the new methods
                const hasParseMethod = typeof loader.parse === 'function';
                const hasParseBinaryMethod = typeof loader.parseBinary === 'function';
                const hasCreateSceneMethod = typeof loader.createScene === 'function';
                const hasLoadMethod = typeof loader.load === 'function';
                
                if (hasParseMethod && hasParseBinaryMethod && hasCreateSceneMethod) {
                    html += '<div class="result success">';
                    html += '<h2>‚úÖ NEW GLTFLoader Detected!</h2>';
                    html += '<p><strong>Status:</strong> You are using the updated version</p>';
                    html += '<p><strong>Features:</strong></p>';
                    html += '<ul>';
                    html += '<li>‚úÖ parse() method - Parses GLTF/GLB data</li>';
                    html += '<li>‚úÖ parseBinary() method - Handles binary GLB format</li>';
                    html += '<li>‚úÖ createScene() method - Creates Three.js scenes</li>';
                    html += '<li>‚úÖ load() method - Loads model files</li>';
                    html += '</ul>';
                    html += '<p><strong>Result:</strong> Models should load correctly!</p>';
                    html += '</div>';
                    
                    html += '<div class="result info">';
                    html += '<h3>Loader Object:</h3>';
                    html += '<pre>' + JSON.stringify({
                        hasManager: !!loader.manager,
                        methods: Object.keys(THREE.GLTFLoader.prototype),
                        type: 'NEW_VERSION'
                    }, null, 2) + '</pre>';
                    html += '</div>';
                    
                } else {
                    html += '<div class="result error">';
                    html += '<h2>‚ùå OLD GLTFLoader Detected!</h2>';
                    html += '<p><strong>Status:</strong> You are using the placeholder version</p>';
                    html += '<p><strong>Problem:</strong> This version does not actually load models</p>';
                    html += '<p><strong>Missing Methods:</strong></p>';
                    html += '<ul>';
                    if (!hasParseMethod) html += '<li>‚ùå parse() method</li>';
                    if (!hasParseBinaryMethod) html += '<li>‚ùå parseBinary() method</li>';
                    if (!hasCreateSceneMethod) html += '<li>‚ùå createScene() method</li>';
                    html += '</ul>';
                    html += '<h3>üîß Solution:</h3>';
                    html += '<ol>';
                    html += '<li><strong>Clear Browser Cache:</strong> Press Ctrl+Shift+Delete</li>';
                    html += '<li><strong>Hard Refresh:</strong> Press Ctrl+F5</li>';
                    html += '<li><strong>Try Incognito Mode:</strong> Open this page in private browsing</li>';
                    html += '<li><strong>Check File:</strong> Verify GLTFLoader.js was updated on server</li>';
                    html += '</ol>';
                    html += '</div>';
                }
                
            } catch (error) {
                html += '<div class="result error">';
                html += '<h2>‚ùå Error Creating GLTFLoader</h2>';
                html += '<p>' + error.message + '</p>';
                html += '</div>';
            }
            
            resultDiv.innerHTML = html;
        }
        
        // Auto-check on load
        window.addEventListener('load', function() {
            setTimeout(checkVersion, 500);
        });
    </script>
</body>
</html>
